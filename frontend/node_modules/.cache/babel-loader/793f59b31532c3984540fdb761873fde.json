{"ast":null,"code":"var _jsxFileName = \"/Users/preyaporn/Documents/GitHub/FSIM/frontend/src/Components/admin/NewStudent/AddNewStudent.js\";\nimport React, { Component } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Button, Form, Col, Row } from \"react-bootstrap\";\nimport { FaCloudUploadAlt } from \"react-icons/fa\";\nimport Year from \"../../option/year\";\nimport Admission_channel from \"../../option/admission_channel\";\nimport Project from \"../../option/project\";\nimport ApiManage from \"../../../Class/ApiManage\";\n\nclass AddNewStudent extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChangeAround = search => {\n      // console.log(search.target.value);\n      this.setState({\n        admission_channel: search.target.value\n      });\n    };\n\n    this.handleChangeProject = search => {\n      // console.log(search.target.value);\n      this.setState({\n        admission_type: search.target.value\n      });\n      this.setState({\n        admission_channel: 0\n      });\n    };\n\n    this.handleChangeYear = search => {\n      this.setState({\n        year: search.target.value\n      });\n    };\n\n    this.handleReset = event => {\n      this.setState({\n        admission_type: 0,\n        admission_channel: 0,\n        year: 0,\n        upload: []\n      });\n    };\n\n    this.onChange = this.onChange.bind(this);\n    this.state = {\n      admission_type: \"\",\n      admission_channel: \"\",\n      year: \"\",\n      upload: [],\n      fileURL: \"\",\n      data: \"\",\n      isLoaded: false,\n      selectedFile: null\n    };\n    this.handleSubmit = this.handleSubmit.bind(this); // this.onSubmit = this.onSubmit.bind(this)\n  }\n\n  onChange(e) {\n    let files = e.target.files[0];\n    let filesArr = Array.prototype.slice.call(files);\n    this.setState({\n      loaded: 0,\n      upload: [...filesArr],\n      selectedFile: files\n    }); // alert(\n    //   this.state.year +\n    //     \" \" +\n    //     this.state.admission_channel +\n    //     \" \" +\n    //     this.state.admission_type\n    // );\n    // this.setState({\n    //     selectedFile: event.target.files[0],\n    //     loaded: 0,\n    //   })\n  }\n\n  removeFile(f) {\n    this.setState({\n      upload: this.state.upload.filter(x => x !== f)\n    });\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n    let data = new FormData();\n    const target = event.target; // alert(data)\n\n    let year = target[0].value;\n    let type = target[1].value;\n    let channel = target[2].value;\n    data.append(\"year\", year);\n    data.append(\"admission_type\", type);\n    data.append(\"admission_channel\", channel);\n    data.append(\"upload\", this.state.selectedFile); // console.log(this.state.selectedFile)\n\n    ApiManage.post(\"admission\", data).then(res => {\n      console.log(res);\n    }).catch(error => {\n      console.log(error.response.data.message);\n      console.log(error.response.data.value);\n    });\n  } // onSubmit(event) {\n  //     alert(this.state)\n  // let data = this.state\n  // alert(data)\n  // fetch(\"http://127.0.0.1:5000/api/v1/admission\", {\n  //     method: \"POST\",\n  //     headers: { \"Content-Type\": \"application/json\", },\n  //     body: JSON.stringify(data)\n  // })\n  //     .then(function (response) {\n  //         return response.json();\n  //     })\n  //     .then(function (data) {\n  //         console.log(data)\n  //     });\n  // }\n\n\n  render() {\n    let _this$state = this.state,\n        isLoaded = _this$state.isLoaded,\n        data = _this$state.data;\n    let show_data;\n\n    if (isLoaded) {\n      show_data = data.map(data => {\n        const firstname = data.firstname,\n              lastname = data.lastname;\n        return React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144\n          },\n          __self: this\n        }, firstname, \" -- \", lastname);\n      });\n    }\n\n    const project_name = [{\n      id: 1,\n      fK: 1,\n      name: \"รอบที่ 1/1 โครงการ 2B-KMUTT\"\n    }, {\n      id: 2,\n      fK: 1,\n      name: \"รอบที่ 1/1 โครงการ Active Recruitment\"\n    }, {\n      id: 3,\n      fK: 1,\n      name: \"รอบที่ 1/1 โครงการคัดเลือกตรง ประเภทเรียนดี\"\n    }, {\n      id: 4,\n      fK: 1,\n      name: \"รอบที่ 1/1 โครงการคัดเลือกตรงความสามารถพิเศษ และทุนเพชรพระจอมเกล้า\"\n    }, {\n      id: 5,\n      fK: 1,\n      name: \"รอบที่ 1/2 โครงการ Active Recruitment\"\n    }, {\n      id: 6,\n      fK: 1,\n      name: \"รอบที่ 1/2 โครงการ Active Recruitment (จากโครงการ I am SCI)\"\n    }, {\n      id: 7,\n      fK: 1,\n      name: \"รอบที่ 1/2 โครงการรับนักศึกษาจากโรงเรียนเทคโนโลยีฐานวิทยาศาสตร์ \t\"\n    }, {\n      id: 8,\n      fK: 1,\n      name: \"รอบที่ 1/2 โครงการรับนักศึกษาพิการ\"\n    }, {\n      id: 9,\n      fK: 1,\n      name: \"รอบที่ 1/2 โครงการรับนักเรียน โครงการ วมว.\"\n    }, {\n      id: 10,\n      fK: 1,\n      name: \"รอบที่ 1/2 โครงการรับนักเรียน จากมูลนิธิ สอวน.\"\n    }, {\n      id: 11,\n      fK: 1,\n      name: \"รอบที่ 1/2 โครงการรับนักศึกษาโดยใช้สิทธิ์บุตรบุคลากร ของ มจธ.\"\n    }, {\n      id: 12,\n      fK: 2,\n      name: \"รอบที่ 2 โครงการคัดเลือกตรงโดยใช้คะแนน GAT/PAT เพื่อผู้เรียนดี มีคุณธรรม (รับนักเรียนเขต* 1,3,4,5,9 เเละกรุงเทพฯ))\"\n    }, {\n      id: 13,\n      fK: 2,\n      name: \"รอบที่ 2 โครงการคัดเลือกตรงโดยใช้คะแนน GAT/PAT เพื่อการกระจายโอกาสทางการศึกษา (รับนักเรียนทุกเขต* ยกเว้นเขต 1 เเละกรุงเทพฯ)\"\n    }, {\n      id: 14,\n      fK: 2,\n      name: \"รอบที่ 2 โครงการคัดเลือกตรง มจธ. รักษาธรรม เพิ่มโอกาสทางการศึกษา\"\n    }, {\n      id: 15,\n      fK: 2,\n      name: \"รอบที่ 2 โครงการคัดเลือกตรงกลุ่ม ปวช.\"\n    }, {\n      id: 16,\n      fK: 2,\n      name: \"รอบที่ 2 โครงการ Active Recruitment\"\n    }, {\n      id: 17,\n      fK: 3,\n      name: \"รอบที่ 3/1 โครงการรับตรงร่วมกัน\"\n    }, {\n      id: 18,\n      fK: 3,\n      name: \"รอบที่ 3/2 โครงการรับตรงร่วมกัน\"\n    }, {\n      id: 19,\n      fK: 4,\n      name: \"รอบที่ 4 โครงการรับนักศึกษาผ่านระบบ Admissions\"\n    }, {\n      id: 20,\n      fK: 5,\n      name: \"รอบที่ 5 โครงการคัดเลือกตรงเพื่อผลิตบุคลากรด้านวิทยาศาสตร์เทคโนโลยีเเละนวัตกรรม (ครั้งที่ 2) ;\"\n    }];\n    const year = [{\n      id: 1,\n      name: \"2012\"\n    }, {\n      id: 2,\n      name: \"2013\"\n    }, {\n      id: 3,\n      name: \"2014\"\n    }];\n\n    let CheckProject = num_project => project_name.filter(p => {\n      return p.fK == num_project;\n    });\n\n    return React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231\n      },\n      __self: this\n    }, show_data, React.createElement(Form, {\n      style: {\n        padding: \"5%\"\n      },\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233\n      },\n      __self: this\n    }, React.createElement(Row, {\n      className: \"style-addData\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234\n      },\n      __self: this\n    }, React.createElement(Col, {\n      sm: \"3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236\n      },\n      __self: this\n    }, \"\\u0E1B\\u0E35\\u0E17\\u0E35\\u0E48\\u0E23\\u0E31\\u0E1A\\u0E40\\u0E02\\u0E49\\u0E32\"), React.createElement(\"formErrors\", {\n      formErrors: this.state.formErrors,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237\n      },\n      __self: this\n    })), React.createElement(Col, {\n      sm: \"6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239\n      },\n      __self: this\n    }, React.createElement(Year, {\n      option: this.handleChangeYear,\n      value: this.state.year,\n      year: year,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240\n      },\n      __self: this\n    }))), React.createElement(Row, {\n      className: \"style-addData interval-top\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247\n      },\n      __self: this\n    }, React.createElement(Col, {\n      sm: \"3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }, \"\\u0E42\\u0E04\\u0E23\\u0E07\\u0E01\\u0E32\\u0E23\\u0E23\\u0E31\\u0E1A\\u0E40\\u0E02\\u0E49\\u0E32\")), React.createElement(Col, {\n      sm: \"6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251\n      },\n      __self: this\n    }, React.createElement(Project, {\n      option: this.handleChangeProject,\n      value: this.state.admission_type // onChange={this.onChange}\n      ,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252\n      },\n      __self: this\n    }))), React.createElement(Row, {\n      className: \"style-addData interval-top\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259\n      },\n      __self: this\n    }, React.createElement(Col, {\n      sm: \"3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261\n      },\n      __self: this\n    }, \"\\u0E23\\u0E2D\\u0E1A\\u0E23\\u0E31\\u0E1A\\u0E40\\u0E02\\u0E49\\u0E32\")), React.createElement(Col, {\n      sm: \"6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263\n      },\n      __self: this\n    }, React.createElement(Admission_channel, {\n      option: this.handleChangeAround,\n      project: CheckProject(this.state.admission_type),\n      value: this.state.admission_channel // onChange={this.onChange}\n      ,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264\n      },\n      __self: this\n    }))), React.createElement(Row, {\n      className: \"style-addData interval-top\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273\n      },\n      __self: this\n    }, React.createElement(Col, {\n      sm: \"3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275\n      },\n      __self: this\n    }, \"\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\\u0E19\\u0E31\\u0E01\\u0E28\\u0E36\\u0E01\\u0E29\\u0E32\\u0E23\\u0E31\\u0E1A\\u0E40\\u0E02\\u0E49\\u0E32\")), React.createElement(Col, {\n      sm: \"9\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"custom-file-upload\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"file\",\n      accept: \".excel,.csv\",\n      onChange: e => this.onChange(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279\n      },\n      __self: this\n    }), React.createElement(FaCloudUploadAlt, {\n      style: {\n        color: \"#FFFFFF\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284\n      },\n      __self: this\n    }), \" UPLOAD CSV FILE\", \" \"), this.state.upload.map(x => // <div\n    //   className=\"file-preview\"\n    //   onClick={this.removeFile.bind(this, x)}\n    //   key={x.name}\n    // >\n    //   {x.name}\n    // </div>\n    alert(x.name)))), React.createElement(\"div\", {\n      className: \"style-addData \",\n      style: {\n        marginTop: \"5%\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300\n      },\n      __self: this\n    }, React.createElement(Button, {\n      className: \"btn-EditData interval-1\",\n      onClick: this.handleReset,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 301\n      },\n      __self: this\n    }, \"RESET\"), React.createElement(Button, {\n      type: \"submit\",\n      className: \"btn-info interval-1\" // onClick={this.handleSubmit}\n      ,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 308\n      },\n      __self: this\n    }, \"SUBMIT\"))));\n  }\n\n}\n\nexport default AddNewStudent;","map":{"version":3,"sources":["/Users/preyaporn/Documents/GitHub/FSIM/frontend/src/Components/admin/NewStudent/AddNewStudent.js"],"names":["React","Component","ReactDOM","Button","Form","Col","Row","FaCloudUploadAlt","Year","Admission_channel","Project","ApiManage","AddNewStudent","constructor","props","handleChangeAround","search","setState","admission_channel","target","value","handleChangeProject","admission_type","handleChangeYear","year","handleReset","event","upload","onChange","bind","state","fileURL","data","isLoaded","selectedFile","handleSubmit","e","files","filesArr","Array","prototype","slice","call","loaded","removeFile","f","filter","x","preventDefault","FormData","type","channel","append","post","then","res","console","log","catch","error","response","message","render","show_data","map","firstname","lastname","project_name","id","fK","name","CheckProject","num_project","p","padding","formErrors","color","alert","marginTop"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Button, Form, Col, Row } from \"react-bootstrap\";\nimport { FaCloudUploadAlt } from \"react-icons/fa\";\nimport Year from \"../../option/year\";\nimport Admission_channel from \"../../option/admission_channel\";\nimport Project from \"../../option/project\";\n\nimport ApiManage from \"../../../Class/ApiManage\";\n\nclass AddNewStudent extends Component {\n  constructor(props) {\n    super(props);\n    this.onChange = this.onChange.bind(this);\n    this.state = {\n      admission_type: \"\",\n      admission_channel: \"\",\n      year: \"\",\n      upload: [],\n      fileURL: \"\",\n      data: \"\",\n      isLoaded: false,\n      selectedFile: null,\n\n    };\n\n    this.handleSubmit = this.handleSubmit.bind(this);\n    // this.onSubmit = this.onSubmit.bind(this)\n  }\n\n  handleChangeAround = search => {\n    // console.log(search.target.value);\n    this.setState({ admission_channel: search.target.value });\n  };\n\n  handleChangeProject = search => {\n    // console.log(search.target.value);\n    this.setState({ admission_type: search.target.value });\n    this.setState({ admission_channel: 0 });\n  };\n\n  handleChangeYear = search => {\n    this.setState({ year: search.target.value });\n  };\n\n  onChange(e) {\n    let files = e.target.files[0];\n    let filesArr = Array.prototype.slice.call(files);\n\n\n    this.setState(\n      {\n        loaded: 0,\n        upload: [...filesArr],\n        selectedFile: files\n      }\n    );\n\n\n    // alert(\n    //   this.state.year +\n    //     \" \" +\n    //     this.state.admission_channel +\n    //     \" \" +\n    //     this.state.admission_type\n    // );\n    // this.setState({\n    //     selectedFile: event.target.files[0],\n    //     loaded: 0,\n    //   })\n  }\n\n  removeFile(f) {\n    this.setState({ upload: this.state.upload.filter(x => x !== f) });\n  }\n\n  handleReset = event => {\n    this.setState({\n      admission_type: 0,\n      admission_channel: 0,\n      year: 0,\n      upload: []\n    });\n  };\n\n\n  handleSubmit(event) {\n    \n    event.preventDefault();\n    let data = new FormData();\n    const target = event.target;\n    // alert(data)\n\n    let year = target[0].value;\n    let type = target[1].value;\n    let channel = target[2].value;\n\n    data.append(\"year\", year);\n    data.append(\"admission_type\", type);\n    data.append(\"admission_channel\", channel);\n    data.append(\"upload\", this.state.selectedFile);\n\n    // console.log(this.state.selectedFile)\n    ApiManage.post(\"admission\", data)\n      .then(res => {\n        console.log(res);\n       \n      })\n      .catch(error => {\n        console.log(error.response.data.message);\n        console.log(error.response.data.value);\n\n      });\n  }\n\n  // onSubmit(event) {\n  //     alert(this.state)\n\n  // let data = this.state\n  // alert(data)\n\n  // fetch(\"http://127.0.0.1:5000/api/v1/admission\", {\n  //     method: \"POST\",\n  //     headers: { \"Content-Type\": \"application/json\", },\n  //     body: JSON.stringify(data)\n  // })\n  //     .then(function (response) {\n  //         return response.json();\n  //     })\n  //     .then(function (data) {\n  //         console.log(data)\n  //     });\n  // }\n\n  render() {\n    let { isLoaded, data } = this.state;\n\n    let show_data;\n\n    if (isLoaded) {\n      show_data = data.map(data => {\n        const { firstname, lastname } = data;\n        return (\n          <p>\n            {firstname} -- {lastname}\n          </p>\n        );\n      });\n    }\n\n    const project_name = [\n      { id: 1, fK: 1, name: \"รอบที่ 1/1 โครงการ 2B-KMUTT\" },\n      { id: 2, fK: 1, name: \"รอบที่ 1/1 โครงการ Active Recruitment\" },\n      { id: 3, fK: 1, name: \"รอบที่ 1/1 โครงการคัดเลือกตรง ประเภทเรียนดี\" },\n      {\n        id: 4,\n        fK: 1,\n        name:\n          \"รอบที่ 1/1 โครงการคัดเลือกตรงความสามารถพิเศษ และทุนเพชรพระจอมเกล้า\"\n      },\n      { id: 5, fK: 1, name: \"รอบที่ 1/2 โครงการ Active Recruitment\" },\n      {\n        id: 6,\n        fK: 1,\n        name: \"รอบที่ 1/2 โครงการ Active Recruitment (จากโครงการ I am SCI)\"\n      },\n      {\n        id: 7,\n        fK: 1,\n        name: \"รอบที่ 1/2 โครงการรับนักศึกษาจากโรงเรียนเทคโนโลยีฐานวิทยาศาสตร์ \t\"\n      },\n      { id: 8, fK: 1, name: \"รอบที่ 1/2 โครงการรับนักศึกษาพิการ\" },\n      { id: 9, fK: 1, name: \"รอบที่ 1/2 โครงการรับนักเรียน โครงการ วมว.\" },\n      { id: 10, fK: 1, name: \"รอบที่ 1/2 โครงการรับนักเรียน จากมูลนิธิ สอวน.\" },\n      {\n        id: 11,\n        fK: 1,\n        name: \"รอบที่ 1/2 โครงการรับนักศึกษาโดยใช้สิทธิ์บุตรบุคลากร ของ มจธ.\"\n      },\n      {\n        id: 12,\n        fK: 2,\n        name:\n          \"รอบที่ 2 โครงการคัดเลือกตรงโดยใช้คะแนน GAT/PAT เพื่อผู้เรียนดี มีคุณธรรม (รับนักเรียนเขต* 1,3,4,5,9 เเละกรุงเทพฯ))\"\n      },\n      {\n        id: 13,\n        fK: 2,\n        name:\n          \"รอบที่ 2 โครงการคัดเลือกตรงโดยใช้คะแนน GAT/PAT เพื่อการกระจายโอกาสทางการศึกษา (รับนักเรียนทุกเขต* ยกเว้นเขต 1 เเละกรุงเทพฯ)\"\n      },\n      {\n        id: 14,\n        fK: 2,\n        name: \"รอบที่ 2 โครงการคัดเลือกตรง มจธ. รักษาธรรม เพิ่มโอกาสทางการศึกษา\"\n      },\n      { id: 15, fK: 2, name: \"รอบที่ 2 โครงการคัดเลือกตรงกลุ่ม ปวช.\" },\n      { id: 16, fK: 2, name: \"รอบที่ 2 โครงการ Active Recruitment\" },\n      { id: 17, fK: 3, name: \"รอบที่ 3/1 โครงการรับตรงร่วมกัน\" },\n      { id: 18, fK: 3, name: \"รอบที่ 3/2 โครงการรับตรงร่วมกัน\" },\n      { id: 19, fK: 4, name: \"รอบที่ 4 โครงการรับนักศึกษาผ่านระบบ Admissions\" },\n      {\n        id: 20,\n        fK: 5,\n        name:\n          \"รอบที่ 5 โครงการคัดเลือกตรงเพื่อผลิตบุคลากรด้านวิทยาศาสตร์เทคโนโลยีเเละนวัตกรรม (ครั้งที่ 2) ;\"\n      }\n    ];\n\n    const year = [\n      {\n        id: 1,\n        name: \"2012\"\n      },\n      {\n        id: 2,\n        name: \"2013\"\n      },\n      {\n        id: 3,\n        name: \"2014\"\n      }\n    ];\n\n    let CheckProject = num_project =>\n      project_name.filter(p => {\n        return p.fK == num_project;\n      });\n\n    return (\n      <React.Fragment>\n        {show_data}\n        <Form style={{ padding: \"5%\" }} onSubmit={this.handleSubmit}>\n          <Row className=\"style-addData\">\n            <Col sm=\"3\">\n              <label>ปีที่รับเข้า</label>\n              <formErrors formErrors={this.state.formErrors} />\n            </Col>\n            <Col sm=\"6\" >\n              <Year\n                option={this.handleChangeYear}\n                value={this.state.year}\n                year={year}\n              />\n            </Col>\n          </Row>\n          <Row className=\"style-addData interval-top\">\n            <Col sm=\"3\">\n              <label>โครงการรับเข้า</label>\n            </Col>\n            <Col sm=\"6\" >\n              <Project\n                option={this.handleChangeProject}\n                value={this.state.admission_type}\n                // onChange={this.onChange}\n              />\n            </Col>\n          </Row>\n          <Row className=\"style-addData interval-top\">\n            <Col sm=\"3\">\n              <label>รอบรับเข้า</label>\n            </Col>\n            <Col sm=\"6\" >\n              <Admission_channel\n                option={this.handleChangeAround}\n                project={CheckProject(this.state.admission_type)}\n                value={this.state.admission_channel}\n                // onChange={this.onChange}\n              />\n            </Col>\n          </Row>\n\n          <Row className=\"style-addData interval-top\">\n            <Col sm=\"3\">\n              <label>ข้อมูลนักศึกษารับเข้า</label>\n            </Col>\n            <Col sm=\"9\">\n              <label className=\"custom-file-upload\">\n                <input\n                  type=\"file\"\n                  accept=\".excel,.csv\"\n                  onChange={(e) => this.onChange(e)}\n                />\n                <FaCloudUploadAlt style={{ color: \"#FFFFFF\" }} /> UPLOAD CSV\n                FILE{\" \"}\n              </label>\n              {this.state.upload.map(x => (\n                // <div\n                //   className=\"file-preview\"\n                //   onClick={this.removeFile.bind(this, x)}\n                //   key={x.name}\n                // >\n                //   {x.name}\n                // </div>\n               alert(x.name)\n              ))\n              }\n            </Col>\n          </Row>\n          <div className=\"style-addData \" style={{ marginTop: \"5%\" }}>\n            <Button\n              className=\"btn-EditData interval-1\"\n              onClick={this.handleReset}\n            >\n              RESET\n            </Button>\n\n            <Button\n              type=\"submit\"\n              className=\"btn-info interval-1\"\n              // onClick={this.handleSubmit}\n             \n            >\n              SUBMIT\n            </Button>\n          </div>\n        </Form>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default AddNewStudent;\n"]},"metadata":{},"sourceType":"module"}